<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex,nofollow,noarchive">
    <meta name="yandex" content="noindex,nofollow,noarchive">
    <meta name="googlebot" content="noindex,nofollow,noarchive">

    <link rel="apple-touch-icon" sizes="180x180" href="https://garagetest.ru/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://garagetest.ru/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://garagetest.ru/favicons/favicon-16x16.png">
    <link rel="manifest" href="https://garagetest.ru/favicons/site.webmanifest">
    <link rel="mask-icon" href="https://garagetest.ru/favicons/safari-pinned-tab.svg" color="#5bbad5">

    <title>Гараж ЦОДД (police)</title>
    <link rel="stylesheet" href="./style/styleForModels/police.css">

    <script defer src="https://unpkg.com/swiper@5.3.8/js/swiper.min.js"></script>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script>
    AFRAME.registerComponent("hotspots", {
      init: function () {
        this.el.addEventListener("reloadspots", function (evt) {
          //get the entire current spot group and scale it to 0
          let currspotgroup = document.getElementById(evt.detail.currspots);
          currspotgroup.setAttribute("scale", "0 0 0");

          //get the entire new spot group and scale it to 1
          let newspotgroup = document.getElementById(evt.detail.newspots);
          newspotgroup.setAttribute("scale", "1 1 1");
        });
      }
    });

    AFRAME.registerComponent("spot", {
      schema: {
        linkto: { type: "string", default: "" },
        spotgroup: { type: "string", default: "" },
        phiStart: { type: "string", default: "" }
      },
      init: function () {
        this.el.addEventListener("click", () => {
          let cam = document.getElementById("cam");
          cam.emit("zoomin");

          let fp = document.getElementById("camfadeplane");
          fp.setAttribute("width", "2");
          fp.setAttribute("height", "2");
          fp.emit("camFadeIn");

          const reloadSpot = () => {
            //set the skybox source to the new image as per the spot
            let sky = document.getElementById("skybox");
            sky.setAttribute("src", this.data.linkto);
            sky.setAttribute("phi-start", this.data.phiStart);

            let spotcomp = document.getElementById("spots");
            let currspots = this.el.parentElement.getAttribute("id");
            //create event for spots component to change the spots data
            spotcomp.emit("reloadspots", {
              newspots: this.data.spotgroup,
              currspots: currspots
            });

            cam.emit("zoomout");

            let fp = document.getElementById("camfadeplane");
            fp.emit("camFadeOut");

            setTimeout(() => {
              fp.setAttribute("width", "0");
              fp.setAttribute("height", "0");
            }, 1000);
          };
          setTimeout(reloadSpot, 2000);
        });
      }
    });
    </script>
</head>
<body>
    <div class="progress-bar">
        <div class="progress-bar-container">
            <div class="image">
                <img class="no_animated" src="media/images/modelPage/loader/logo.gif" alt="цодд">
            </div>
            <span id="progress-label">0%</span>
            <div id="hellopreloader_barWrapper">
                <progress id="progress-bar" value="0" max="100"></progress>
            </div>
            <label for="progress-bar" id="progress_text">Загружаем модель в высоком разрешении.<br>Пожалуйста, дождитесь завершения</label>
        </div>
    </div>

    <!-- <div id="mySidenav" class="sidenav">
        <a class="closebtn">&times;</a>
        <a class="model" data-folder="MuslCarLowPoly_mintexture_transform" data-model="untitled">Muslcar</a>
        <a class="model" data-folder="Police_car_transform" data-model="scene">Police</a>
        <a class="model" data-folder="Bank_truck_transform" data-model="scene">Bank_truck</a>
        <a class="model" data-folder="Japanese_transform" data-model="scene">Japanese_sedan</a>
        <a class="model" data-folder="Pickup_transform" data-model="scene">Pickup</a>
        <a class="model" data-folder="Wagon_transform" data-model="scene">Wagon</a>
        <a class="model" data-folder="bridge" data-model="untitled">Bridge</a>
    </div>
        
    <span class="openbtn">&#9776; open</span> -->

    <div class="point point-0">
        <div class="label"></div>
        <div class="pulseTipon"></div>
        <div class="text">Проблесковый маячок</div>
    </div>
    <div class="point point-1">
        <div class="label"></div>
        <div class="pulseTipon"></div>
        <div class="text">Мощьный V8&nbsp;под капотом</div>
    </div>
    <div class="point point-2">
        <div class="label"></div>
        <div class="pulseTipon"></div>
        <div class="text">Вместительный багажник</div>
    </div>

    <div class="header">
        <a class="header__logo" href="./index.html">
            <img class="header__logo-img" src="media/images/logo/header_logo.svg" alt="logo">
            <p class="header__logo-text">Гараж ЦОДД</p>
        </a>
    </div>
    
    <div class="tech_spec active">
        <div class="tech_spec__wrapper hidden">
            <div class="tech_spec__description hidden">
                <div class="tech_spec__description-grid_wrapper hidden">
                    <div class="tech_spec__titles hidden">
                        <div class="text_spec__texts">
                            <p class="tech_spec__title">Дорожный патруль</p>
                        </div>
                    </div>
                    <div class="tech_spec__mission-panel hidden">
                        <img src="media/images/modelPage/arrows/corner.svg" alt="стрелки" class="corner">
                        <img src="media/images/modelPage/arrows/corner.svg" alt="стрелки" class="corner-2">
                        <img src="media/images/modelPage/arrows/corner.svg" alt="стрелки" class="corner-3">
                        <img src="media/images/modelPage/arrows/corner.svg" alt="стрелки" class="corner-4">
                        <p class="tech_spec__text">Задача</p>
                    </div>
                    <div class="tech_spec__mission hidden">
                        <p class="tech_spec__text-descr">Регулировать движение на&nbsp;сложных участках, помогать водителям при поломке или аварии.</p>
                    </div>
                    <div class="tech_spec__outfit-panel hidden">
                        <img src="media/images/modelPage/arrows/corner.svg" alt="стрелки" class="corner">
                        <img src="media/images/modelPage/arrows/corner.svg" alt="стрелки" class="corner-2">
                        <img src="media/images/modelPage/arrows/corner.svg" alt="стрелки" class="corner-3">
                        <img src="media/images/modelPage/arrows/corner.svg" alt="стрелки" class="corner-4">
                        <p class="tech_spec__text">Экипировка</p>
                    </div>
                    <div class="tech_spec__outfit hidden">
                        <ul class="tech_spec__outfit-list">
                            <li class="tech_spec__outfit-item">
                                <div class="tech_spec__outfit-img">
                                    <img src="media/images/modelPage/outfit/amarok/outfit_1.svg" alt="Огнетушитель" fetchpriority="high">
                                </div>
                                <span class="tech_spec__outfit-text">Огнетушитель</span>
                            </li>
                            <li class="tech_spec__outfit-item">
                                <div class="tech_spec__outfit-img">
                                    <img src="media/images/modelPage/outfit/amarok/outfit_2.svg" alt="Аптечка" fetchpriority="high">
                                </div>
                                <span class="tech_spec__outfit-text">Аптечка</span>
                            </li>
                            <li class="tech_spec__outfit-item">
                                <div class="tech_spec__outfit-img">
                                    <img src="media/images/modelPage/outfit/amarok/outfit_3.svg" alt="Инструменты" fetchpriority="high">
                                </div>
                                <span class="tech_spec__outfit-text">Инструменты</span>
                            </li>
                            <li class="tech_spec__outfit-item">
                                <div class="tech_spec__outfit-img">
                                    <img src="media/images/modelPage/outfit/amarok/outfit_4.svg" alt="Трос" fetchpriority="high">
                                </div>
                                <span class="tech_spec__outfit-text">Трос</span>
                            </li>
                            <li class="tech_spec__outfit-item">
                                <div class="tech_spec__outfit-img">
                                    <img fetchpriority="high" src="media/images/modelPage/outfit/ford/outfit_1.svg" alt="Противооткатные упоры">
                                </div>
                                <span class="tech_spec__outfit-text">Колодки</span>
                            </li>
                            <li class="tech_spec__outfit-item">
                                <div class="tech_spec__outfit-img">
                                    <img src="media/images/modelPage/outfit/amarok/outfit_6.svg" alt="Пусковое устройство" fetchpriority="high">
                                </div>
                                <span class="tech_spec__outfit-text">Пусковое устройство</span>
                            </li>
                            <li class="tech_spec__outfit-item">
                                <div class="tech_spec__outfit-img">
                                    <img src="media/images/modelPage/outfit/amarok/outfit_7.svg" alt="Бланки европротокола" fetchpriority="high">
                                </div>
                                <span class="tech_spec__outfit-text">Бланки европротокола</span>
                            </li>
                            <li class="tech_spec__outfit-item">
                                <div class="tech_spec__outfit-img">
                                    <img src="media/images/modelPage/outfit/amarok/outfit_8.svg" alt="Телескопическая лестница" fetchpriority="high">
                                </div>
                                <span class="tech_spec__outfit-text">Cкладная лестница</span>
                            </li>
                            <li class="tech_spec__outfit-item">
                                <div class="tech_spec__outfit-img">
                                    <img src="media/images/modelPage/outfit/amarok/outfit_9.svg" alt="Домкрат" fetchpriority="high">
                                </div>
                                <span class="tech_spec__outfit-text">Домкрат</span>
                            </li>
                            <li class="tech_spec__outfit-item">
                                <div class="tech_spec__outfit-img">
                                    <img src="media/images/modelPage/outfit/amarok/outfit_10.svg" alt="Дорожные конусы" fetchpriority="high">
                                </div>
                                <span class="tech_spec__outfit-text">Дорожные конусы</span>
                            </li>
                            <li class="tech_spec__outfit-item">
                                <div class="tech_spec__outfit-img">
                                    <img src="media/images/modelPage/outfit/amarok/outfit_11.svg" alt="Гайковерт" fetchpriority="high">
                                </div>
                                <span class="tech_spec__outfit-text">Гайковерт</span>
                            </li>
                        </ul>
                    </div>
                    <div class="tech_spec__button">
                        <a class="tech_spec__btn">
                            <span>Подробнее</span>
                            <img src="media/images/modelPage/arrows/icon-arrow.svg" alt="icon-arrow" fetchpriority="high">
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="tech_spec__interior" id="amarok">
        <p class="tech_spec__interior-title">Volkswagen Amarok</p>
        <div class="tech_spec__interior-wrapper">
            <div class="tech_spec__interior-btn">
                <span class="tech_spec__interior-text">В салон</span>
                <div class="arrow-wrapper">
                    <img src="media/images/modelPage/arrows/interior_arrow.svg" alt="interior_arrow">
                </div>
            </div>
        </div>
    </div>
    
    <div class="auto_park">
        <div class="container">
            <div class="auto_park_wrapper">
                <div class="auto_park__control">
                    <p class="auto_park__title">Транспорт ЦОДД</p>
                    <img class="rotate" src="media/images/modelPage/arrows/auto_park_arrow.svg" alt="auto_park_btn">
                </div>
                <div class="auto_park_slider">
                    <div class="auto_park_slider-overflow swiper_model">
                        <div class="auto_park_slider-wrapper swiper-wrapper">
                            <div class="gallery_item swiper-slide">
                            <a class="gallery_item_link" href="./muslCar.html">
                                <picture>
                                    <img class="gallery_item-img" src="media/images/modelPage/slider/amarok.png" alt="amarok" fetchpriority="high">
                                </picture>
                            </a>
                            </div>
                            <div class="gallery_item active swiper-slide">
                            <a class="gallery_item_link" href="#">
                                <picture>
                                    <img class="gallery_item-img" src="media/images/modelPage/slider/ford.png" alt="ford" fetchpriority="high">
                                </picture>
                            </a>
                            </div>
                            <div class="gallery_item swiper-slide">
                            <a class="gallery_item_link" href="./moto.html">
                                <picture>
                                    <img class="gallery_item-img" src="media/images/modelPage/slider/bus.png" alt="bus" fetchpriority="high">
                                </picture>
                            </a>
                            </div>
                            <div class="gallery_item swiper-slide">
                            <a class="gallery_item_link" href="#">
                                <picture>
                                    <img class="gallery_item-img" src="media/images/modelPage/slider/kater.png" alt="kater" fetchpriority="high">
                                </picture>
                            </a>
                            </div>
                            <div class="gallery_item swiper-slide">
                            <a class="gallery_item_link" href="#">
                                <picture>
                                    <img class="gallery_item-img" src="media/images/modelPage/slider/velo.png" alt="velo" fetchpriority="high">
                                </picture>
                            </a>
                            </div>
                            <div class="gallery_item swiper-slide">
                            <a class="gallery_item_link" href="#">
                                <picture>
                                    <img class="gallery_item-img" src="media/images/modelPage/slider/moskvich.png" alt="moskvich" fetchpriority="high">
                                </picture>
                            </a>
                            </div>
                            <div class="gallery_item swiper-slide">
                            <a class="gallery_item_link" href="#">
                                <picture>
                                    <img class="gallery_item-img" src="media/images/modelPage/slider/solaris_gray.png" alt="solaris" fetchpriority="high">
                                </picture>
                            </a>
                            </div>
                        </div>
                    </div>
                    <div class="auto_park_slider-button">
                        <button class="prev_button">
                            <img src="media/images/modelPage/arrows/icon-arrow.png" alt="arrow_prev" fetchpriority="high">
                        </button>
                        <button class="next_button">
                            <img src="media/images/modelPage/arrows/icon-arrow.png" alt="arrow_next" fetchpriority="high">
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <canvas class="threeJSScene" id="webgl"></canvas>
    <div id="overlay"></div>

    <div class="pulse_wrapper">
        <div class="pulse_media">
            <img class="pulse_img" src="media/images/modelPage/AR/AR-cube.svg" alt="AR">
            <img class="pulse_img" src="media/images/modelPage/AR/AR.svg" alt="AR">
        </div>
        <div class="pulse"></div>
    </div>

    <div class="qrCode-popup">
        <div class="qrCode-popup_wrapper">
            <p class="title">Дополненная реальность</p>
            <img class="qr_code" src="media/images\modelPage\AR\qr-police.svg" alt="QR-код">
            <p class="description">
                Наведите камеру на&nbsp;QR-код, затем нажмите на&nbsp;появившееся сообщение.
            </p>
            <div class="closeButton">
                Закрыть
            </div>
        </div>
    </div>

    <!-- https://coddmac.store/THREE/3Dmodels/police/scene.gltf -->
    <!-- https://garagetest.ru/models/Police_car_transform/scene.gltf -->

    <model-viewer id="pageWithModel" class="google_viewer" ar reveal="manual" camera-controls touch-action="pan-y" auto-rotate src="https://garagetest.ru/models/Police_car_transform/scene.gltf" alt="AR 3D-model">
    </model-viewer>

    <a-scene loading-screen="enabled: true, dotsColor: #62A744, backgroundColor: #090909" vr-mode-ui="enabled: false" ar-mode-ui="enabled: false" xr-mode-ui="enabled: false"
         device-orientation-permission-ui="
        denyButtonText: Отказаться;
        allowButtonText: Разрешить;
        cancelButtonText: Закрыть;
        deviceMotionMessage: Разрешите этому сайту использовать гироскопы вашего устройства для ориентации в&nbsp;пространстве. Так экскурсия станет гораздо интерактивней и&nbsp;увлекательней.;
        mobileDesktopMessage: Разрешите этому сайту использовать гироскопы вашего устройства для ориентации в&nbsp;пространстве. Так экскурсия станет гораздо интерактивней и&nbsp;увлекательней.;
        httpsMessage: Зайдите на&nbsp;этот сайт по&nbsp;протоколу HTTPS, чтобы войти в&nbsp;режим&nbsp;VR и&nbsp;предоставить доступ к&nbsp;датчикам устройства.;">
        <a-assets>
            <img
                id="room1"
                src="media/images/modelPage/aframe_360/amarok/amarok.jpg"
                crossorigin="anonymous"
                importance="high"
            />
            <a-mixin
                    id="info-sphere"
                    geometry="primitive: sphere; radius: 0.4;"
                    material="color: #ff0000;"
            ></a-mixin>
        </a-assets>
        <a-entity
            id="cam"
            camera="fov:80"
            position="0 1.6 0"
            look-controls
            cursor="rayOrigin: mouse"
            animation__zoomin="property:camera.fov;dur:2000;to:50;startEvents:zoomin;"
            animation__zoomout="property:camera.fov;dur:1000;to:80;startEvents:zoomout;"
        >
            <a-plane
                    id="camfadeplane"
                    rotation="10 0.5 0"
                    position="0 0 -0.5"
                    material="color:#000000;transparent:true;opacity:0"
                    width="0"
                    height="0"
                    animation__fadein="property:material.opacity;to:1;dur:2000;startEvents:camFadeIn"
                    animation__fadeout="property:material.opacity;to:0;dur:1000;startEvents:camFadeOut"
            ></a-plane>
        </a-entity>
        <a-sky id="skybox" src="#room1" rotation="0 0 0" phi-start="175"></a-sky>
    </a-scene>

    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.5.0/model-viewer.min.js"></script>
    <!-- <script type="module" src="https://cdn.jsdelivr.net/npm/@google/model-viewer/dist/model-viewer-module.min.js"></script> -->
    <!-- <script type="module" src="https://cdn.jsdelivr.net/npm/@google/model-viewer-effects/dist/model-viewer-effects.min.js"></script> -->
    <script type="module" src="./js/fullModelScripts/police.js"></script>
</body>
</html>